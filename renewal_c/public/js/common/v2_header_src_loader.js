!function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=457)}({457:function(t,e,n){t.exports=n(458)},458:function(t,e,n){var i=n(459);({init:function(){this.targetIcon=document.querySelector(".coupon-list-btn"),this.linkwindow="",this.elm,this.bindEvent(),this.getWindowUrl()},insertIframe:function(){var t="<iframe id='cpcapf_v2List' src='https://stg-voucher.sgscloud.info/v2/frame?parent="+location.href+'\' name="cpcapf_v2ListApi" height="0" style="display: none;"></iframe>';document.body.insertAdjacentHTML("beforeend",t)},bindEvent:function(){var t=this;window.addEventListener("load",function(){t.myPageIframe=document.getElementById("v2_mypage_frame"),t.myPageIframe?window.addEventListener("message",function(e){t.myPageIframe&&e.data.hasOwnProperty("mypageCoupons")&&t.insertIframe()},!1):t.insertIframe()},!1),window.addEventListener("message",function(e){e.data.hasOwnProperty("cpcapf_frame")&&t.calculateUnreadCount(e.data)},!1),this.targetIcon&&this.targetIcon.addEventListener("click",function(){t.openListPage()})},calculateUnreadCount:function(t){var e=JSON.parse(JSON.stringify(t.all.recommend)),n=JSON.parse(JSON.stringify(t.all.coupons)),o=JSON.parse(JSON.stringify(t.all.active)),r=i(e,n,o);if("notLogin"===t.all.memberType||null===t.all.memberId)t.couponCookie?this.cookieData=Object.keys(t.couponCookie):this.cookieData="",this.couponsArray=Object.keys(r),this.cookieData.length>0?(this.overlapId=this.couponsArray.concat(this.cookieData),this.overlapId=this.overlapId.filter(function(t,e,n){return n.indexOf(t)===e&&e!==n.lastIndexOf(t)}),this.unReadCount=this.couponsArray.length-this.overlapId.length):this.unReadCount=this.couponsArray.length,this.insertCouponIcn(this.unReadCount,t.all.memberType);else{var a=Object.values(r).filter(function(t,e){if(!1===t.details.has_read)return!0});this.unReadCount=a.length,this.getCsvUnreadCount(t)}},getCsvUnreadCount:function(t){var e=Object.values(t.my.csv).filter(function(t,e){if(!1===t.details.has_read)return!0});this.unReadCount=this.unReadCount+e.length,this.insertCouponIcn(this.unReadCount,t.all.memberType)},insertCouponIcn:function(t,e){this.elm=document.createElement("span");var n=Number(t),i=null===this.targetIcon.getAttribute("data-badge_left")?21:this.targetIcon.getAttribute("data-badge_left"),o=null===this.targetIcon.getAttribute("data-badge_top")?0:this.targetIcon.getAttribute("data-badge_top");this.targetIcon.appendChild(this.elm),this.targetIcon.style.position="relative",this.elm.style.cssText="border-radius: 10px; background-color: #D91E18; color: #FFF; font-size: 10px; letter-spacing: normal; left: "+i+"px; padding: 2px 3px; position: absolute; top: "+o+"px; pointer-events: none; line-height: 1;",n>=10||"notLogin"===e&&n>0?this.elm.textContent="new":n>0&&n<10&&"logined"===e?(this.elm.textContent=n,i=parseInt(i)+9,this.elm.style.left=i+"px"):this.hideUnreadNum()},hideUnreadNum:function(){this.elm&&(this.elm.style.display="none")},openListPage:function(){this.hideUnreadNum();var t="https://stg-voucher.sgscloud.info/listall?parent="+this.windowUrl;""===this.linkwindow||this.linkwindow.closed?this.linkwindow=window.open(t,"_blank"):this.linkwindow.closed||(this.linkwindow.close(),this.linkwindow=window.open(t,"_blank"))},getWindowUrl:function(){this.windowUrl=encodeURIComponent(location.href)}}).init()},459:function(t,e,n){"use strict";var i=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(t){i[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,a,s=function(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),c=1;c<arguments.length;c++){for(var l in n=Object(arguments[c]))o.call(n,l)&&(s[l]=n[l]);if(i){a=i(n);for(var u=0;u<a.length;u++)r.call(n,a[u])&&(s[a[u]]=n[a[u]])}}return s}}});
